---
title: 使用正则表达式搜索文本
description: 了解如何在“查找和替换”对话框的“查找内容”字段中使用正则表达式来指定要匹配的模式。
ms.prod: sql
ms.technology: ssms
ms.topic: conceptual
f1_keywords:
- vs.regularexpressionbuilder
helpviewer_keywords:
- regular expressions [SQL Server Management Studio]
- Query Editor [SQL Server Management Studio], regular expression searches
- searches [SQL Server Management Studio], regular expressions
ms.assetid: a057690c-d118-4159-8e4d-2ed5ccfe79d3
author: markingmyname
ms.author: maghan
ms.reviewer: ''
ms.custom: seo-lt-2019
ms.date: 03/14/2017
monikerRange: '>=aps-pdw-2016||=azuresqldb-current||=azure-sqldw-latest||>=sql-server-2016||>=sql-server-linux-2017||=azuresqldb-mi-current'
ms.openlocfilehash: f09834f72bbcf5932961045a803c57dc9702a242
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/10/2021
ms.locfileid: "100344176"
---
# <a name="search-text-with-regular-expressions"></a>使用正则表达式搜索文本

[!INCLUDE[SQL Server Azure SQL Database Synapse Analytics PDW ](../../includes/applies-to-version/sql-asdb-asdbmi-asa-pdw.md)]

正则表达式是简明而灵活的表示法，用于查找和替换各种模式的文本。 在 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]“查找和替换”对话框的“查找内容”字段中，可以使用一组特定的正则表达式 。

## <a name="find-using-regular-expressions"></a>使用正则表达式进行查找
1. 若要在“快速查找”、“在文件中查找”、“快速替换”或“在文件中替换”操作过程中，在“查找内容”字段中启用正则表达式，请选中“查找选项”下的“使用”，然后选择“正则表达式”。

2. **“查找内容”** 字段旁边的 **“引用列表”** 三角形按钮将变为可用状态。 单击此按钮可显示一组最常用的正则表达式。 如果选择了表达式生成器中的某个项，则可将该项插入 **“查找内容”** 字符串。

> [!NOTE]
> **“查找内容”** 字符串中使用的正则表达式与 [!INCLUDE[msCoName](../../includes/msconame-md.md)] .NET Framework 编程中的有效正则表达式相比，语法上存在差异。 例如，在“查找和替换”对话框中，大括号 {} 用于表示带标记的表达式。 所以，表达式“zo{1}”将匹配所有“zo”后带标记 1 的匹配项，如“Alonzo1”和“Gonzo1”。 但在 .NET Framework 中，{} 符号用于表示量词。 因此，表达式“zo{1}”将匹配所有“z”后跟一个“o”的匹配项，如匹配“zone”，但不匹配“zoo”。

下表对 **“引用列表”** 中提供的正则表达式进行了说明。

|表达式|语法|说明|
|----------------|------------|-----------------|
|任何单个字符|.|匹配除换行符外的所有单一字符。|
|零个或更多|*|匹配零或更多前导表达式的匹配项，执行所有可能的匹配。|
|一个或更多|+|匹配至少一个前导表达式的匹配项。|
|行首|^|仅匹配行首位置的字符串。|
|行尾|$|仅匹配行尾位置的字符串。|
|字首|\<|仅匹配文本中以此开头的字。|
|字尾|>|仅匹配文本中以此结尾的字。|
|分行符|\n|匹配与平台无关的换行符。 在替换表达式中，插入一个换行符。|
|在集合中的任何一个字符|[]|匹配 [] 中的任何一个字符。 若要指定字符范围，请列出起始字符和结束字符，并用短划线 (-) 分隔，如 [a-z]。|
|不在集合中的任何一个字符|[^...]|匹配不在 ^ 之后的字符集中的任何一个字符。|
|或|&#124;|匹配“或”符号 (&#124;) 两旁的任一表达式。 常用于组中。 例如，(sponge&#124;mud) bath 可以匹配“sponge bath”和“mud bath”。|
|Escape|\|将反斜杠 (\\) 后的字符作为文字匹配。 此表达式允许您搜索正则表达式标记中使用的符号，如 { 和 ^。 例如， \\^ 可用于查找字符 ^。|
|标记表达式|{}|匹配用括起来的表达式内的文本。|
|C/C++ 标识符|:i|匹配表达式 ([a-zA-Z_$][a-zA-Z0-9_$]*)。|
|用引号括起来的字符串|:q|匹配表达式 (("[^"]*")&#124;('[^']\*'))。|
|空格或制表符|:b|匹配空格或制表符。|
|Integer|:z|匹配表达式 ([0-9]+)。|

**“引用列表”** 中只列出了部分可在 **“查找和替换”** 操作中使用的正则表达式。 还可以将下列任一正则表达式插入 **“查找内容”** 字符串：

|表达式|语法|说明|
|----------------|------------|-----------------|
|最少 - 零个或更多|@|匹配零个或更多前导表达式的匹配项，匹配尽可能少的字符。|
|最少 - 一个或更多|#|匹配一个或更多前导表达式的匹配项，匹配尽可能少的字符。|
|重复 n 次|^n|匹配前导表达式的 n 个匹配项。 例如，[0-9]^4 匹配所有四位数序列。|
|分组|()|将子表达式分组|
|第 n 个标记文本|\n|在 **“查找或替换”** 表达式中，指示匹配第 n 个标记表达式的文本，其中 n 为 1 到 9 之间的数字。<br /><br /> 在“替换”表达式中，\0 将插入完整的匹配文本。|
|右对齐字段|\\(w,n)|在“替换”表达式中，在宽度至少为 *w* 个字符的字段中，右对齐第 n 个标记表达式。|
|左对齐字段|\\(-w,n)|在“替换”表达式中，在宽度至少为 *w* 个字符的字段中，左对齐第 n 个标记表达式。|
|阻止匹配|~(X)|如果在表达式的此处出现 X，则阻止匹配。 例如，real~(ity) 匹配“realty”和“really”中的“real”，但不匹配“reality”中的“real”。|
|字母数字字符|:a|匹配表达式 ([a-zA-Z0-9])。|
|字母字符|:c|匹配表达式 ([a-zA-Z])。|
|十进制数字|:d|匹配表达式 ([0-9])。|
|十六进制数|:h|匹配表达式 ([0-9a-fA-F]+)。|
|有理数|:n|匹配表达式 (([0-9]+.[0-9]*)&#124;([0-9]\*.[0-9]+)&#124;([0-9]+))。|
|字母字符串|:w|匹配表达式 ([a-zA-Z]+)。|
|Escape|\e|Unicode U+001B。|
|响铃|\g|Unicode U+0007。|
|退格键|\h|Unicode U+0008。|
|选项卡|\t|匹配制表符，Unicode U+0009。|
|Unicode 字符|\x#### 或 \u####|匹配由 Unicode 值确定的字符，其中 #### 为十六进制数字。 可以使用 ISO 10646 码位或给出代理项对值的两个 Unicode 码位，指定基本多语言面（即代理项）以外的字符。|

下表列出了按标准 Unicode 字符属性匹配时的语法。 双字母缩写和 Unicode 字符属性数据库中列出的缩写相同。 可以将这些缩写指定为字符集的一部分。 例如，表达式 [:Nd:Nl:No] 匹配任何数字。

|表达式|语法|说明|
|----------------|------------|-----------------|
|大写字母|:Lu|匹配任何单个大写字母。 例如，:Luhe 匹配“The”，但不匹配“the”。|
|小写字母|:Ll|匹配任何单个小写字母。 例如，:Llhe 匹配“the”，但不匹配“The”。|
|标题大写字母|:Lt|匹配一个大写字母后跟一个小写字母的字符，例如 Nj 和 Dz。|
|修饰字母|:Lm|匹配字母或标点符号（如逗号、交叉重音符和秒号），这些字母或标点符号是用于修饰前导字母的。|
|其他字母|:Lo|匹配其他字母，如歌特字母 ahsa。|  
|十进制数字|:Nd|匹配十进制数字（如 0-9）及其全角对等数字。|
|字母数字|:Nl|匹配字母数字，如罗马数字和零的表意数字。|
|其他数字|:No|匹配其他数字，如旧斜体数字一。|
|左标点|:Ps|匹配左标点，如左小括号和左大括号。|
|右标点|:Pe|匹配右标点，如右小括号和右大括号。|
|左引号|:Pi|匹配左双引号。|
|右引号|:Pf|匹配单引号和右双引号。|
|划线号|:Pd|匹配划线号。|
|连接号|:Pc|匹配下划线符号。|
|其他标点|:Po|匹配 (,)、?、"、!、@、#、%、&、*、\\、(:)、(;)、' 和 /。|
|空格分隔符|:Zs|匹配空格。|
|行分隔符|:Zl|匹配 Unicode 字符 U+2028。|
|段落分隔符|:Zp|匹配 Unicode 字符 U+2029。|
|不占位标记|:Mn|匹配不占位标记。|
|合并标记|:Mc|匹配合并标记。|
|封闭标记|:Me|匹配封闭标记。|
|数学符号|:Sm|匹配 +、=、~、&#124;、\<, and >。|
|货币符号|:Sc|匹配 $ 和其他货币符号。|
|修饰符号|:Sk|匹配修饰符号，如抑扬符、重音符和长音符。|
|其他符号|:So|匹配其他符号，如版权符号、段落标记和度数符号。|
|其他控制|:Cc|匹配行尾。|
|其他格式|:Cf|格式化控制字符，如双向控制字符。|
|代理项|:Cs|匹配代理项对的一半。|
|其他专门用途|:Co|匹配任何专用区域的字符。|
|其他未分配字符|:Cn|匹配未映射到 Unicode 字符的字符。|
|指定前面的字符或组的出现次数。 有关详细信息，请参阅 [n 次完全匹配](/dotnet/standard/base-types/quantifiers-in-regular-expressions#match-exactly-n-times-n)。|{n}，其中“n”是出现次数|`x(ab){2}x` 匹配“xababx”<br/>`x(ab){2,3}x` 匹配“xababx”和“xabababx”，但不匹配“xababababx”|

除了标准的 Unicode 字符属性以外，还可以将下列附加属性指定为字符集的一部分。

|表达式|语法|说明|
|----------------|------------|-----------------|
|Alpha|:Al|匹配任何单字符。 例如，:Alhe 匹配“The”、“then” 和“reached”之类的字。|
|Numeric|:Nu|匹配任何数字。|
|标点|:Pu|匹配任意一个标点符号，如 ?、@、' 等等。|
|空格|:Wh|匹配任何类型的空格，包括印刷空格和表意空格。|
|双向|:Bi|匹配自右至左书写的字符，如阿拉伯语和希伯莱语字符。|
|朝鲜文字|:Ha|匹配朝鲜文字字母和组合字母。|
|Hiragana|:Hi|匹配平假名字符。|
|Katakana|:Ka|匹配片假名字符。|
|象形/汉字/日文汉字|:Id|匹配象形字符，如汉字和日文汉字。|

## <a name="see-also"></a>另请参阅  
- [搜索和替换](./search-and-replace.md)
- [使用通配符搜索文本](./search-text-with-wildcards.md)